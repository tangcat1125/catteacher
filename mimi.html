<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mimi vs Chichi - Web Version</title>
  <style>
    body { margin: 0; background: #000; }
    canvas { display: block; margin: 0 auto; border: 2px solid white; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Game Constants
const WIDTH = canvas.width;
const HEIGHT = canvas.height;
const RADIUS = 10;
const MAX_HP = 5;
const COOLDOWN = 400; // ms
const PROJECTILE_SPEED = 5;

// Game State
let mimi = { x: 100, y: HEIGHT/2, hp: MAX_HP, lastFire: 0 };
let chichi = { x: WIDTH - 100, y: HEIGHT/2, hp: MAX_HP };
let projectiles = [];
let keys = {};

// Input
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// Game Loop
function gameLoop() {
  ctx.clearRect(0, 0, WIDTH, HEIGHT);

  // Fire projectile (Z key)
  if (keys["z"] && Date.now() - mimi.lastFire > COOLDOWN) {
    projectiles.push({ x: mimi.x + RADIUS, y: mimi.y, vx: PROJECTILE_SPEED });
    mimi.lastFire = Date.now();
  }

  // Update projectiles
  projectiles.forEach(p => p.x += p.vx);
  projectiles = projectiles.filter(p => p.x < WIDTH);

  // Collision detection
  projectiles.forEach((p, i) => {
    const dx = p.x - chichi.x;
    const dy = p.y - chichi.y;
    if (dx * dx + dy * dy < RADIUS * RADIUS * 4) {
      chichi.hp = Math.max(0, chichi.hp - 1);
      projectiles.splice(i, 1);
    }
  });

  // Draw Mimi
  ctx.fillStyle = "green";
  ctx.beginPath();
  ctx.arc(mimi.x, mimi.y, RADIUS, 0, Math.PI * 2);
  ctx.fill();

  // Draw Chichi
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(chichi.x, chichi.y, RADIUS, 0, Math.PI * 2);
  ctx.fill();

  // Draw Projectiles
  ctx.fillStyle = "blue";
  projectiles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
    ctx.fill();
  });

  // Draw HP
  ctx.fillStyle = "white";
  ctx.font = "20px Arial";
  ctx.fillText("Mimi HP: " + mimi.hp, 20, 30);
  ctx.fillText("Chichi HP: " + chichi.hp, WIDTH - 160, 30);

  // Game Over
  if (chichi.hp === 0) {
    ctx.fillStyle = "yellow";
    ctx.font = "40px Arial";
    ctx.fillText("Mimi Wins!", WIDTH/2 - 100, HEIGHT/2);
  } else {
    requestAnimationFrame(gameLoop);
  }
}

// Start Game
requestAnimationFrame(gameLoop);
</script>
</body>
</html>
